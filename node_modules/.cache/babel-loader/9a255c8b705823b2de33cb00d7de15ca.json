{"ast":null,"code":"import \"core-js/modules/es.array.fill.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Activity\",\n  data: function data() {\n    var news = {\n      id: '1',\n      title: '标题标题标题',\n      author: 'admin',\n      createTime: '202204241222',\n      modifyTime: '202204241222',\n      mainText: '这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本'\n    };\n    var action = {\n      id: '1',\n      title: '标题标题标题',\n      manager: 'admin',\n      createTime: '202204241222',\n      modifyTime: '202204241222',\n      mainText: '这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本'\n    };\n    return {\n      // newsDatas: [],\n      newsDatas: Array(2).fill(news),\n      // actionDatas: [],\n      actionDatas: Array(2).fill(action),\n      newsTotal: 0,\n      actionTotal: 0,\n      newsSearchData: \"\",\n      actionSearchData: \"\",\n      newsFormVisible: false,\n      actionFormVisible: false,\n      newsTextDrawerShow: false,\n      actionTextDrawerShow: false,\n      newsForm: [],\n      actionForm: [],\n      textArea: \"\"\n    };\n  },\n  created: function created() {\n    this.newsLoad();\n    this.actionLoad();\n  },\n  methods: {\n    newsLoad: function newsLoad() {\n      var _this = this;\n\n      this.request.get(\"/activity/news\").then(function (res) {\n        console.log(res.data);\n        _this.newsDatas = res.data.records;\n        _this.newsTotal = res.data.total;\n      });\n    },\n    actionLoad: function actionLoad() {\n      var _this2 = this;\n\n      this.request.get(\"/activity/action\").then(function (res) {\n        console.log(res.data);\n        _this2.actionDatas = res.data.records;\n        _this2.actionTotal = res.data.total;\n      });\n    },\n    handleNewsSearch: function handleNewsSearch() {\n      var _this3 = this;\n\n      this.request.get(\"/activity/news/search\", {\n        params: {\n          searchData: this.newsSearchData\n        }\n      }).then(function (res) {\n        console.log(res.data);\n        _this3.newsDatas = res.data.records;\n        _this3.newsTotal = res.data.total;\n      });\n    },\n    handleActionSearch: function handleActionSearch() {\n      var _this4 = this;\n\n      this.request.get(\"/activity/news/search\", {\n        params: {\n          actionData: this.actionSearchData\n        }\n      }).then(function (res) {\n        console.log(res.data);\n        _this4.actionDatas = res.data.records;\n        _this4.actionTotal = res.data.total;\n      });\n    },\n    saveNews: function saveNews() {\n      var _this5 = this;\n\n      this.request.post(\"/activity/news/save\", this.newsForm).then(function (res) {\n        if (res.data) {\n          _this5.$message.success(\"保存成功\");\n\n          _this5.newsFormVisible = false;\n\n          _this5.newsLoad();\n        } else {\n          _this5.$message.error(\"保存失败\");\n        }\n      });\n    },\n    saveAction: function saveAction() {\n      var _this6 = this;\n\n      this.request.post(\"/activity/action/save\", this.actionForm).then(function (res) {\n        if (res.data) {\n          _this6.$message.success(\"保存成功\");\n\n          _this6.actionFormVisible = false;\n\n          _this6.actionLoad();\n        } else {\n          _this6.$message.error(\"保存失败\");\n        }\n      });\n    },\n    handleAddNews: function handleAddNews() {\n      this.newsFormVisible = true;\n      this.newsForm = {};\n    },\n    handleAddAction: function handleAddAction() {\n      this.actionFormVisible = true;\n      this.actionForm = {};\n    },\n    newsHandleClose: function newsHandleClose(done) {\n      var _this7 = this;\n\n      this.$confirm('确认保存？').then(function (_) {\n        _this7.actionForm.mainText = _this7.textArea;\n        done();\n      }).catch(function (_) {});\n    },\n    actionHandleClose: function actionHandleClose(done) {\n      var _this8 = this;\n\n      this.$confirm('确认保存？').then(function (_) {\n        _this8.actionForm.mainText = _this8.textArea;\n        done();\n      }).catch(function (_) {});\n    },\n    handleNewsTextDrawerShow: function handleNewsTextDrawerShow(text) {\n      this.textArea = text;\n      this.newsTextDrawerShow = true;\n    },\n    handleActionTextDrawerShow: function handleActionTextDrawerShow(text) {\n      this.textArea = text;\n      this.actionTextDrawerShow = true;\n    },\n    handleEditNews: function handleEditNews(row) {\n      this.newsForm = Object.assign({}, row);\n      this.newsFormVisible = true;\n    },\n    handleEditAction: function handleEditAction(row) {\n      this.actionForm = Object.assign({}, row);\n      this.newsFormVisible = true;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACAA,kBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,aADA;AAEAC,qBAFA;AAGAC,qBAHA;AAIAC,gCAJA;AAKAC,gCALA;AAMAC;AANA;AAQA;AACAL,aADA;AAEAC,qBAFA;AAGAK,sBAHA;AAIAH,gCAJA;AAKAC,gCALA;AAMAC;AANA;AAQA;AACA;AACAE,oCAFA;AAGA;AACAC,wCAJA;AAKAC,kBALA;AAMAC,oBANA;AAOAC,wBAPA;AAQAC,0BARA;AASAC,4BATA;AAUAC,8BAVA;AAWAC,+BAXA;AAYAC,iCAZA;AAaAC,kBAbA;AAcAC,oBAdA;AAeAC;AAfA;AAiBA,GApCA;AAqCAC,SArCA,qBAqCA;AACA;AACA;AACA,GAxCA;AAyCAC;AACAC,YADA,sBACA;AAAA;;AACA;AACAC;AACA;AACA;AACA,OAJA;AAKA,KAPA;AAQAC,cARA,wBAQA;AAAA;;AACA;AACAD;AACA;AACA;AACA,OAJA;AAKA,KAdA;AAeAE,oBAfA,8BAeA;AAAA;;AACA;AACAC;AACAC;AADA;AADA,SAIAC,IAJA,CAIA;AACAL;AACA;AACA;AACA,OARA;AASA,KAzBA;AA0BAM,sBA1BA,gCA0BA;AAAA;;AACA;AACAH;AACAI;AADA;AADA,SAIAF,IAJA,CAIA;AACAL;AACA;AACA;AACA,OARA;AASA,KApCA;AAqCAQ,YArCA,sBAqCA;AAAA;;AACA;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA,OARA;AASA,KA/CA;AAgDAC,cAhDA,wBAgDA;AAAA;;AACA;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA,OARA;AASA,KA1DA;AA2DAC,iBA3DA,2BA2DA;AACA;AACA;AACA,KA9DA;AA+DAC,mBA/DA,6BA+DA;AACA;AACA;AACA,KAlEA;AAmEAC,mBAnEA,2BAmEAC,IAnEA,EAmEA;AAAA;;AACA,6BACAR,IADA,CACA;AACA;AACAQ;AACA,OAJA,EAKAC,KALA,CAKA,eALA;AAMA,KA1EA;AA2EAC,qBA3EA,6BA2EAF,IA3EA,EA2EA;AAAA;;AACA,6BACAR,IADA,CACA;AACA;AACAQ;AACA,OAJA,EAKAC,KALA,CAKA,eALA;AAMA,KAlFA;AAmFAE,4BAnFA,oCAmFAC,IAnFA,EAmFA;AACA;AACA;AACA,KAtFA;AAuFAC,8BAvFA,sCAuFAD,IAvFA,EAuFA;AACA;AACA;AACA,KA1FA;AA2FAE,kBA3FA,0BA2FAC,GA3FA,EA2FA;AACA;AACA;AACA,KA9FA;AA+FAC,oBA/FA,4BA+FAD,GA/FA,EA+FA;AACA;AACA;AACA;AAlGA;AAzCA","names":["name","data","id","title","author","createTime","modifyTime","mainText","manager","newsDatas","actionDatas","newsTotal","actionTotal","newsSearchData","actionSearchData","newsFormVisible","actionFormVisible","newsTextDrawerShow","actionTextDrawerShow","newsForm","actionForm","textArea","created","methods","newsLoad","console","actionLoad","handleNewsSearch","params","searchData","then","handleActionSearch","actionData","saveNews","saveAction","handleAddNews","handleAddAction","newsHandleClose","done","catch","actionHandleClose","handleNewsTextDrawerShow","text","handleActionTextDrawerShow","handleEditNews","row","handleEditAction"],"sourceRoot":"src/views","sources":["Activity.vue"],"sourcesContent":["<template>\r\n  <div>\r\n<!--    新闻模块-->\r\n    <div>\r\n      <div style=\"margin-top: 30px;margin-bottom: 10px;margin-left: 10px\">新闻：共 {{newsTotal}} 条</div>\r\n      <div style=\"margin-top: 10px; margin-bottom: 10px\">\r\n        <el-input style=\"width: 200px\" placeholder=\"输入关键词\" suffix-icon=\"el-icon-search\" v-model=\"newsSearchData\"></el-input>\r\n        <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"handleNewsSearch\">搜索</el-button>\r\n      </div>\r\n      <div style=\"margin-top: 10px; margin-bottom: 10px\">\r\n        <el-button type=\"primary\" style=\"margin-left: 20px\" icon=\"el-icon-circle-plus-outline\" @click=\"handleAddNews\">新建</el-button>\r\n        <el-popconfirm\r\n            style=\"margin-left: 10px\"\r\n            confirm-button-text='确定'\r\n            cancel-button-text='我再想想'\r\n            icon=\"el-icon-info\"\r\n            icon-color=\"red\"\r\n            title=\"您确定批量删除这些数据吗？\"\r\n            @confirm=\"delNewsBatch\"\r\n        >\r\n          <el-button type=\"danger\" slot=\"reference\" icon=\"el-icon-delete\">批量删除</el-button>\r\n        </el-popconfirm>\r\n      </div>\r\n      <el-table :data=\"newsDatas\" border stripe style=\"width: 1001px\" @selection-change=\"handleNewsSelectionChange\">\r\n        <el-table-column type=\"selection\" width=\"40\"></el-table-column>\r\n        <el-table-column prop=\"id\" label=\"ID\" width=\"60\"></el-table-column>\r\n        <el-table-column prop=\"title\" label=\"标题\" width=\"150\"></el-table-column>\r\n        <el-table-column prop=\"author\" label=\"作者\" width=\"120\"></el-table-column>\r\n        <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"220\"></el-table-column>\r\n        <el-table-column prop=\"modifyTime\" label=\"修改时间\" width=\"220\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"190\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"success\" style=\"margin-left: 5px\" icon=\"el-icon-edit\" @click=\"handleEditNews(scope.row)\">编辑</el-button>\r\n            <el-popconfirm\r\n                style=\"margin-left: 10px\"\r\n                confirm-button-text='确定'\r\n                cancel-button-text='我再想想'\r\n                icon=\"el-icon-info\"\r\n                icon-color=\"red\"\r\n                title=\"确定删除这条新闻？\"\r\n                @confirm=\"handleDeleteNews(scope.row.id)\"\r\n            >\r\n              <el-button type=\"danger\" slot=\"reference\" icon=\"el-icon-remove-outline\">删除</el-button>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n<!--    活动模块-->\r\n    <div>\r\n      <div style=\"margin-top: 30px;margin-bottom: 10px;margin-left: 10px\">活动：共 {{actionTotal}} 条</div>\r\n      <div style=\"margin-top: 10px; margin-bottom: 10px\">\r\n        <el-input style=\"width: 200px\" placeholder=\"输入关键词\" suffix-icon=\"el-icon-search\" v-model=\"actionSearchData\"></el-input>\r\n        <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"handleActionSearch\">搜索</el-button>\r\n      </div>\r\n      <div style=\"margin-top: 10px; margin-bottom: 10px\">\r\n        <el-button type=\"primary\" style=\"margin-left: 20px\" icon=\"el-icon-circle-plus-outline\" @click=\"handleAddAction\">新建</el-button>\r\n        <el-popconfirm\r\n            style=\"margin-left: 10px\"\r\n            confirm-button-text='确定'\r\n            cancel-button-text='我再想想'\r\n            icon=\"el-icon-info\"\r\n            icon-color=\"red\"\r\n            title=\"您确定批量删除这些数据吗？\"\r\n            @confirm=\"delActionBatch\"\r\n        >\r\n          <el-button type=\"danger\" slot=\"reference\" icon=\"el-icon-delete\">批量删除</el-button>\r\n        </el-popconfirm>\r\n      </div>\r\n      <el-table :data=\"actionDatas\" border stripe style=\"width: 1001px\" @selection-change=\"handleSActionelectionChange\">\r\n        <el-table-column type=\"selection\" width=\"40\"></el-table-column>\r\n        <el-table-column prop=\"id\" label=\"ID\" width=\"60\"></el-table-column>\r\n        <el-table-column prop=\"title\" label=\"标题\" width=\"150\"></el-table-column>\r\n        <el-table-column prop=\"manager\" label=\"发起人\" width=\"120\"></el-table-column>\r\n        <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"220\"></el-table-column>\r\n        <el-table-column prop=\"modifyTime\" label=\"修改时间\" width=\"220\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"190\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"success\" style=\"margin-left: 5px\" icon=\"el-icon-edit\" @click=\"handleEditAction(scope.row)\">编辑</el-button>\r\n            <el-popconfirm\r\n                style=\"margin-left: 10px\"\r\n                confirm-button-text='确定'\r\n                cancel-button-text='我再想想'\r\n                icon=\"el-icon-info\"\r\n                icon-color=\"red\"\r\n                title=\"确定删除此活动？\"\r\n                @confirm=\"handleDeleteAction(scope.row.id)\"\r\n            >\r\n              <el-button type=\"danger\" slot=\"reference\" icon=\"el-icon-remove-outline\">删除</el-button>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n<!--    新增弹窗-->\r\n    <el-dialog title=\"新闻细节\" :visible.sync=\"newsFormVisible\" width=\"30%\">\r\n      <el-form label-width=\"80px\" size=\"small\">\r\n        <el-form-item label=\"标题\">\r\n          <el-input v-model=\"newsForm.title\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"作者\">\r\n          <el-input v-model=\"newsForm.author\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item v-model=\"actionForm.mainText\" autocomplete=\"off\">\r\n          <el-button type=\"success\" icon=\"el-icon-edit\" @click=\"handleNewsTextDrawerShow(actionForm.mainText)\">编辑正文</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"newsFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveNews\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"活动详情\" :visible.sync=\"actionFormVisible\" width=\"30%\">\r\n      <el-form label-width=\"80px\" size=\"small\">\r\n        <el-form-item label=\"标题\">\r\n          <el-input v-model=\"actionForm.title\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"发起人\">\r\n          <el-input v-model=\"actionForm.manager\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item v-model=\"actionForm.mainText\" autocomplete=\"off\">\r\n          <el-button type=\"success\" icon=\"el-icon-edit\" @click=\"handleActionTextDrawerShow(actionForm.mainText)\">编辑正文</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"actionFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveAction\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-drawer\r\n        title=\"编辑正文\"\r\n        :visible.sync=\"newsTextDrawerShow\"\r\n        direction=\"rtl\"\r\n        :before-close=\"newsHandleClose\">\r\n      <el-input style=\"margin-left: 20px; width: 90%\" type=\"textarea\" placeholder=\"请输入内容\" v-model=\"textArea\" maxlength=\"3000\" show-word-limit></el-input>\r\n    </el-drawer>\r\n    <el-drawer\r\n        title=\"编辑正文\"\r\n        :visible.sync=\"actionTextDrawerShow\"\r\n        direction=\"rtl\"\r\n        :before-close=\"actionHandleClose\">\r\n      <el-input style=\"margin-left: 20px; width: 90%\" type=\"textarea\" placeholder=\"请输入内容\" v-model=\"textArea\" maxlength=\"3000\" show-word-limit></el-input>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Activity\",\r\n  data() {\r\n    const news = {\r\n      id: '1',\r\n      title: '标题标题标题',\r\n      author: 'admin',\r\n      createTime: '202204241222',\r\n      modifyTime: '202204241222',\r\n      mainText: '这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本'\r\n    };\r\n    const action = {\r\n      id: '1',\r\n      title: '标题标题标题',\r\n      manager: 'admin',\r\n      createTime: '202204241222',\r\n      modifyTime: '202204241222',\r\n      mainText: '这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本这是一段测试文本'\r\n    };\r\n    return {\r\n      // newsDatas: [],\r\n      newsDatas: Array(2).fill(news),\r\n      // actionDatas: [],\r\n      actionDatas: Array(2).fill(action),\r\n      newsTotal: 0,\r\n      actionTotal: 0,\r\n      newsSearchData: \"\",\r\n      actionSearchData: \"\",\r\n      newsFormVisible: false,\r\n      actionFormVisible: false,\r\n      newsTextDrawerShow: false,\r\n      actionTextDrawerShow: false,\r\n      newsForm: [],\r\n      actionForm: [],\r\n      textArea: \"\",\r\n    }\r\n  },\r\n  created() {\r\n    this.newsLoad()\r\n    this.actionLoad()\r\n  },\r\n  methods: {\r\n    newsLoad() {\r\n      this.request.get(\"/activity/news\").then(res => {\r\n        console.log(res.data)\r\n        this.newsDatas = res.data.records\r\n        this.newsTotal = res.data.total\r\n      })\r\n    },\r\n    actionLoad() {\r\n      this.request.get(\"/activity/action\").then(res => {\r\n        console.log(res.data)\r\n        this.actionDatas = res.data.records\r\n        this.actionTotal = res.data.total\r\n      })\r\n    },\r\n    handleNewsSearch() {\r\n      this.request.get(\"/activity/news/search\", {\r\n        params: {\r\n          searchData: this.newsSearchData\r\n        }\r\n      }).then(res => {\r\n        console.log(res.data)\r\n        this.newsDatas = res.data.records\r\n        this.newsTotal = res.data.total\r\n      })\r\n    },\r\n    handleActionSearch() {\r\n      this.request.get(\"/activity/news/search\", {\r\n        params: {\r\n          actionData: this.actionSearchData\r\n        }\r\n      }).then(res => {\r\n        console.log(res.data)\r\n        this.actionDatas = res.data.records\r\n        this.actionTotal = res.data.total\r\n      })\r\n    },\r\n    saveNews() {\r\n      this.request.post(\"/activity/news/save\", this.newsForm).then(res => {\r\n        if(res.data) {\r\n          this.$message.success(\"保存成功\")\r\n          this.newsFormVisible = false\r\n          this.newsLoad()\r\n        } else {\r\n          this.$message.error(\"保存失败\")\r\n        }\r\n      })\r\n    },\r\n    saveAction() {\r\n      this.request.post(\"/activity/action/save\", this.actionForm).then(res => {\r\n        if(res.data) {\r\n          this.$message.success(\"保存成功\")\r\n          this.actionFormVisible = false\r\n          this.actionLoad()\r\n        } else {\r\n          this.$message.error(\"保存失败\")\r\n        }\r\n      })\r\n    },\r\n    handleAddNews(){\r\n      this.newsFormVisible = true\r\n      this.newsForm = {}\r\n    },\r\n    handleAddAction(){\r\n      this.actionFormVisible = true\r\n      this.actionForm = {}\r\n    },\r\n    newsHandleClose(done) {\r\n      this.$confirm('确认保存？')\r\n          .then(_ => {\r\n            this.actionForm.mainText = this.textArea\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n    },\r\n    actionHandleClose(done) {\r\n      this.$confirm('确认保存？')\r\n          .then(_ => {\r\n            this.actionForm.mainText = this.textArea\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n    },\r\n    handleNewsTextDrawerShow(text){\r\n      this.textArea = text\r\n      this.newsTextDrawerShow = true\r\n    },\r\n    handleActionTextDrawerShow(text){\r\n      this.textArea = text\r\n      this.actionTextDrawerShow = true\r\n    },\r\n    handleEditNews(row) {\r\n        this.newsForm = Object.assign({},row)\r\n        this.newsFormVisible = true\r\n    },\r\n    handleEditAction(row) {\r\n      this.actionForm = Object.assign({},row)\r\n      this.newsFormVisible = true\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}